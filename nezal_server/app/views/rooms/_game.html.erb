    <script src="/javascripts/battleship/util.js"></script>
    <script src="/javascripts/battleship/ship.js"></script>
    <script src="/javascripts/battleship/map.js"></script>
    <script src="/javascripts/battleship/player.js"></script>
    <script src="/javascripts/battleship/computer-player.js"></script>
    <script src="/javascripts/battleship/network-player.js"></script>
    <script src="/javascripts/battleship/game.js"></script>
    <script src="/javascripts/battleship/aspect.js"></script>
    <script src="/javascripts/battleship/console-ui.js"></script>
    <script src="/javascripts/battleship/simple-ui.js"></script>
    <style>
      .grid {
        border :1px solid blue;
        background : white;
        padding:0px;
        margin:0px;
        margin-right:8px;
        margin-bottom:8px;
        float: left
      }
      .grid td {
        border :1px solid white;
        background : blue;
        margin:0px;
        padding :0px;
        width : 32px;
        height : 34px;
      }
      .grid td.ship{
        background : orange;
      }
      .grid td.hit{
        background : red;  
      }
      .grid td.miss{
        background : navy;
      }
    </style>
    <script>
      
      var player_num = <%= @room[:users].length  %> -1 ;
      var total_players = 2;
      var players = [];
      
      for(var i=0; i<total_players; i++){
        if(i==player_num){
          players[i] = Player.cloneProto(4, 4);
        }else{
          players[i]= NetworkPlayer.cloneProto(4, 4)
        }
      }
      
      //var game = Battleship.clone([player1, player2]);
      //var game = ConsoleBattleship.clone([player1, player2]);
      
      var game = SimpleBattleship.cloneProto(players, player_num);

      game.process = function(data){
        event = data["data"].evalJSON(true)
        if(event.event == "fire"){
          result = players[player_num].hitAt(event.x, event.y)
        }else if (event.event == "result"){
          game.fireCallback(event.result, event.x, event.y, event.hitPoints)
        }
      }
           
      game.start();
      
      if(player_num == 0){
        players[0].play()
      }
      
    </script>

